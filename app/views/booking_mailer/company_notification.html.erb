<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–æ–≤–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—ò–∞ - AutoRentalsMK</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f8f9fa;
      }
      .container {
        background-color: white;
        border-radius: 8px;
        padding: 30px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      .header {
        text-align: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #e9ecef;
        background-color: #007bff;
        color: white;
        margin: -30px -30px 30px -30px;
        padding: 30px;
        border-radius: 8px 8px 0 0;
      }
      .notification-icon {
        font-size: 48px;
        margin-bottom: 10px;
      }
      .booking-number {
        background-color: rgba(255,255,255,0.2);
        color: white;
        padding: 8px 16px;
        border-radius: 6px;
        display: inline-block;
        font-weight: bold;
        margin-top: 15px;
      }
      .section {
        margin: 25px 0;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 6px;
      }
      .section h3 {
        margin-top: 0;
        color: #007bff;
        border-bottom: 1px solid #dee2e6;
        padding-bottom: 10px;
      }
      .info-row {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #e9ecef;
      }
      .info-row:last-child {
        border-bottom: none;
      }
      .label {
        font-weight: bold;
        color: #6c757d;
      }
      .value {
        color: #212529;
      }
      .vehicle-summary {
        display: flex;
        align-items: center;
        gap: 15px;
        padding: 15px;
        background-color: white;
        border-radius: 6px;
        margin-top: 10px;
      }
      .vehicle-image {
        width: 80px;
        height: 60px;
        object-fit: cover;
        border-radius: 4px;
      }
      .vehicle-details h4 {
        margin: 0 0 5px 0;
        color: #212529;
      }
      .vehicle-price {
        color: #007bff;
        font-weight: bold;
      }
      .price-breakdown {
        background-color: #e8f5e8;
        padding: 20px;
        border-radius: 6px;
        margin: 20px 0;
        border-left: 4px solid #28a745;
      }
      .breakdown-row {
        display: flex;
        justify-content: space-between;
        padding: 5px 0;
      }
      .breakdown-row.total {
        border-top: 2px solid #28a745;
        padding-top: 10px;
        margin-top: 10px;
        font-weight: bold;
        font-size: 1.1em;
        color: #28a745;
      }
      .urgent-info {
        background-color: #fff3cd;
        border: 1px solid #ffeaa7;
        padding: 20px;
        border-radius: 6px;
        margin: 20px 0;
        text-align: center;
      }
      .urgent-info h4 {
        color: #856404;
        margin-top: 0;
      }
      .action-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 20px;
      }
      .action-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background-color: #007bff;
        color: white;
        text-decoration: none;
        padding: 12px 24px;
        border-radius: 6px;
        font-weight: bold;
      }
      .action-btn.primary {
        background-color: #28a745;
      }
      .action-btn.secondary {
        background-color: #6c757d;
      }
      .footer {
        text-align: center;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #e9ecef;
        color: #6c757d;
        font-size: 14px;
      }
      .status-badge {
        display: inline-block;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: bold;
        text-transform: uppercase;
        background-color: #ffc107;
        color: #212529;
      }
      .timestamp {
        background-color: #e9ecef;
        padding: 10px;
        border-radius: 4px;
        font-size: 14px;
        color: #6c757d;
        text-align: center;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="notification-icon">üöó</div>
        <h1>–ù–æ–≤–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—ò–∞!</h1>
        <p>–ö–ª–∏–µ–Ω—Ç –ø—Ä–∞–≤–∏ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—ò–∞ –Ω–∞ –≤–æ–∑–∏–ª–æ</p>
        <div class="booking-number">–†–µ–∑–µ—Ä–≤–∞—Ü–∏—ò–∞ #<%= @booking.id %></div>
      </div>

      <div class="timestamp">
        –ö—Ä–µ–∏—Ä–∞–Ω–æ –Ω–∞: <%= @booking.created_at.strftime("%d %B, %Y –≤–æ %H:%M") %>
      </div>

      <div class="section">
        <h3>üìã –î–µ—Ç–∞–ª–∏ –∑–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—ò–∞—Ç–∞</h3>
        <div class="info-row">
          <span class="label">–î–∞—Ç—É–º –Ω–∞ –ø–æ–¥–∏–≥–∞—ö–µ:</span>
          <span class="value"><%= @booking.start_date.strftime("%d %B, %Y") %></span>
        </div>
        <div class="info-row">
          <span class="label">–î–∞—Ç—É–º –Ω–∞ –≤—Ä–∞—ú–∞—ö–µ:</span>
          <span class="value"><%= @booking.end_date.strftime("%d %B, %Y") %></span>
        </div>
        <div class="info-row">
          <span class="label">–í—Ä–µ–º–µ—Ç—Ä–∞–µ—ö–µ:</span>
          <span class="value"><%= @booking.duration_in_days %> –¥–µ–Ω<%= @booking.duration_in_days > 1 ? '–∞' : '' %></span>
        </div>
        <div class="info-row">
          <span class="label">–õ–æ–∫–∞—Ü–∏—ò–∞ –∑–∞ –ø–æ–¥–∏–≥–∞—ö–µ:</span>
          <span class="value"><%= @booking.pickup_location %></span>
        </div>
        <div class="info-row">
          <span class="label">–°—Ç–∞—Ç—É—Å:</span>
          <span class="value">
            <span class="status-badge">–ù–∞ —á–µ–∫–∞—ö–µ</span>
          </span>
        </div>
      </div>

      <div class="section">
        <h3>üöó –í–æ–∑–∏–ª–æ</h3>
        <div class="vehicle-summary">
          <img src="<%= @booking.car.image_url %>" alt="<%= @booking.car.full_name %>" class="vehicle-image">
          <div class="vehicle-details">
            <h4><%= @booking.car.full_name %></h4>
            <div class="vehicle-price">‚Ç¨<%= @booking.car.price_per_day %>/–¥–µ–Ω</div>
          </div>
        </div>
      </div>

      <div class="section">
        <h3>üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∑–∞ –∫–ª–∏–µ–Ω—Ç–æ—Ç</h3>
        <div class="info-row">
          <span class="label">–ò–º–µ –∏ –ø—Ä–µ–∑–∏–º–µ:</span>
          <span class="value"><%= @booking.customer_name %></span>
        </div>
        <div class="info-row">
          <span class="label">–ï-–ø–æ—à—Ç–∞:</span>
          <span class="value">
            <a href="mailto:<%= @booking.customer.email %>"><%= @booking.customer.email %></a>
          </span>
        </div>
        <div class="info-row">
          <span class="label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
          <span class="value">
            <a href="tel:<%= @booking.customer.phone %>"><%= @booking.customer.phone %></a>
          </span>
        </div>
      </div>

      <% if @booking.special_requests.present? %>
        <div class="section">
          <h3>üìù –°–ø–µ—Ü–∏—ò–∞–ª–Ω–∏ –±–∞—Ä–∞—ö–∞</h3>
          <p style="background-color: white; padding: 15px; border-radius: 4px; margin: 10px 0; font-style: italic;">
            "<%= @booking.special_requests %>"
          </p>
        </div>
      <% end %>

      <div class="price-breakdown">
        <h4 style="margin-top: 0; color: #28a745;">üí∞ –§–∏–Ω–∞–Ω—Å–∏—Å–∫–∏ –ø—Ä–µ–≥–ª–µ–¥</h4>
        <div class="breakdown-row">
          <span>–î–Ω–µ–≤–Ω–∞ —Å—Ç–∞–ø–∫–∞:</span>
          <span>‚Ç¨<%= @booking.car.price_per_day %></span>
        </div>
        <div class="breakdown-row">
          <span>–í—Ä–µ–º–µ—Ç—Ä–∞–µ—ö–µ:</span>
          <span><%= @booking.duration_in_days %> –¥–µ–Ω<%= @booking.duration_in_days > 1 ? '–∞' : '' %></span>
        </div>
        <div class="breakdown-row total">
          <span>–í–∫—É–ø–µ–Ω –∏–∑–Ω–æ—Å:</span>
          <span>‚Ç¨<%= @booking.total_price %></span>
        </div>
      </div>

      <div class="urgent-info">
        <h4>‚ö†Ô∏è –ü–æ—Ç—Ä–µ–±–Ω–∏ —Å–µ –∏—Ç–Ω–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏!</h4>
        <p>–ù–æ–≤–∞—Ç–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—ò–∞ –±–∞—Ä–∞ –≤–Ω–∏–º–∞–Ω–∏–µ. –í–µ –º–æ–ª–∏–º–µ –∫–æ–Ω—Ç–∞–∫—Ç–∏—Ä–∞—ò—Ç–µ –≥–æ –∫–ª–∏–µ–Ω—Ç–æ—Ç –≤–æ –Ω–∞—ò–∫—Ä–∞—Ç–æ–∫ –º–æ–∂–µ–Ω —Ä–æ–∫ –∑–∞ –ø–æ—Ç–≤—Ä–¥–∞ –Ω–∞ –¥–µ—Ç–∞–ª–∏—Ç–µ.</p>
      </div>

      <div class="action-buttons">
        <a href="tel:<%= @booking.customer.phone %>" class="action-btn primary">
          üìû –ü–æ–≤–∏–∫–∞—ò –∫–ª–∏–µ–Ω—Ç
        </a>
        <a href="mailto:<%= @booking.customer.email %>" class="action-btn">
          ‚úâÔ∏è –ò—Å–ø—Ä–∞—Ç–∏ –µ-–ø–æ—à—Ç–∞
        </a>
        <a href="<%= Rails.application.routes.url_helpers.admin_cars_url %>" class="action-btn secondary">
          üîß –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª
        </a>
      </div>

      <div class="footer">
        <p><strong>AutoRentalsMK - –°–∏—Å—Ç–µ–º –∑–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏</strong></p>
        <p>–ê–≤—Ç–æ–º–∞—Ç—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∞ –ø–æ—Ä–∞–∫–∞ –æ–¥ —Å–∏—Å—Ç–µ–º–æ—Ç –∑–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏</p>
        <p>–î–∞—Ç—É–º: <%= Date.current.strftime("%d %B, %Y") %></p>
      </div>
    </div>
  </body>
</html>
