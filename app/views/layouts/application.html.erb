<!DOCTYPE html>
<html>
  <head>
    <title><%= t("app.meta.title") %></title>
   <meta name="description" content="<%= t('app.meta.description') %>">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="google-site-verification" content="LDPcj-YlJPc9zq5zh2gHfjqYjNDuMfIvVaZDUquOLrw">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Source+Sans+3:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <%# Includes all stylesheet files in app/assets/stylesheets %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", type: "module" %>
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="<%= t('app.meta.title') %>" />
    <meta property="og:description" content="Welcome to AutoRentalsMK, your trusted car rental service in Macedonia." />
    <meta property="og:image" content="<%= asset_url('macedonia.png') %>" />
    <meta property="og:url" content="<%= request.original_url %>" />
    <meta property="og:type" content="website" />
  </head>

  <body class="light-theme">
    <nav class="navbar" data-controller="navigation">
      <div class="nav-container">
        <%= link_to root_path, class: "nav-logo" do %>
          <%= image_tag "autorentals_logo.jpg", alt: t("app.meta.title"), class: "logo-image" %>
          <span class="logo-text"><%= t("app.brand") %></span>
        <% end %>
        
        <div class="nav-menu" data-navigation-target="menu">
          <%= link_to t('app.nav.home'), root_path, class: "nav-link #{'active' if current_page?(root_path)}" %>
          <%= link_to t('app.nav.cars'), cars_path, class: "nav-link #{'active' if current_page?(cars_path)}" %>
          <%#= link_to t('app.nav.long_term_rentals', default: 'Long-Term Rentals'), long_term_rentals_path, class: "nav-link #{'active' if current_page?(long_term_rentals_path)}" %>
          <%= link_to t('app.nav.about'), home_path, class: "nav-link #{'active' if current_page?(home_path)}" %>
          <%= link_to t('app.nav.contact'), contact_path, class: "nav-link #{'active' if current_page?(contact_path)}" %>
          <%= link_to t('app.nav.partners', default: 'Partners'), partners_path, class: "nav-link #{'active' if current_page?(partners_path)}" %>
        </div>
        
        <div class="nav-cta">
          <%= link_to t('app.nav.book_now'), cars_path, class: "btn btn-primary" %>
          <div class="language-switcher">
            <% I18n.available_locales.each do |loc| %>
              <% if loc == I18n.locale %>
                <span class="lang current"><%= t("app.language.#{loc}") %></span>
              <% else %>
                <%= link_to t("app.language.#{loc}"), url_for(params.permit!.to_h.merge(locale: loc)), class: 'lang' %>
              <% end %>
            <% end %>
          </div>
        </div>
        
        <div class="nav-mobile-toggle" data-action="click->navigation#toggleMenu">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>

    <main class="main-content">
      <%= yield %>
    </main>

    <footer class="footer">
      <div class="footer-container">
        <div class="footer-content">
          <div class="footer-section">
            <h3><%= t('app.brand') %></h3>
            <p><%= t('app.footer.description') %></p>
          </div>
          <div class="footer-section">
            <h4><%= t('app.footer.quick_links') %></h4>
            <ul>
              <li><%= link_to t('app.nav.home'), root_path %></li>
              <li><%= link_to t('app.nav.cars'), cars_path %></li>
              <li><%= link_to t('app.nav.book_now'), cars_path %></li>
              <li><%= link_to t('app.nav.contact'), contact_path %></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4><%= t('app.footer.contact_info') %></h4>
            <p><i class="fa-solid fa-envelope"></i> contact@autorentals.mk</p>
            <p><i class="fa-solid fa-phone"></i> +389 71 297 645</p>
            <p><i class="fa-solid fa-location-dot"></i> <%= t('contact.info.address.line_html').html_safe %></p>
          </div>
          <div class="footer-section">
            <h4><%= t('app.footer.social_media', default: 'Social Media') %></h4>
            <p><a href="https://www.instagram.com/autorentalsmk" target="_blank"><i class="fa-brands fa-instagram"></i> Instagram</a></p>
            <p><a href="viber://chat?number=%2B38971297645"><i class="fa-brands fa-viber"></i> Viber</a></p>
            <p><a href="https://wa.me/38971297645" target="_blank"><i class="fa-brands fa-whatsapp"></i> WhatsApp</a></p>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2025 AutoRentalsMK. <%= t('app.footer.rights') %> | <%= link_to 'Privacy Policy', privacy_policy_path, style: 'color: inherit; text-decoration: underline;' %></p>
        </div>
      </div>
    </footer>
  </body>
</html>
