<% content_for :title, "–°–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ - autorentalsMK" %>

<section class="bookings-header">
  <div class="container">
    <h1>–°–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏</h1>
    <p>–£–ø—Ä–∞–≤—É–≤–∞—ò—Ç–µ –∏ –ø—Ä–µ–≥–ª–µ–¥–∞—ò—Ç–µ –≥–∏ —Å–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ –∑–∞ –∏–∑–Ω–∞—ò–º—É–≤–∞—ö–µ</p>
  </div>
</section>

<section class="bookings-content">
  <div class="container">
    <% if @bookings.any? %>
      <div class="bookings-grid">
        <% @bookings.each do |booking| %>
          <div class="booking-card">
            <div class="booking-header">
              <div class="booking-number">–†–µ–∑–µ—Ä–≤–∞—Ü–∏—ò–∞ #<%= booking.id %></div>
              <div class="booking-status">
                <span class="status-badge status-<%= booking.status %>">
                  <%= booking.status.humanize %>
                </span>
              </div>
            </div>

            <div class="booking-details">
              <div class="car-info">
                <img src="<%= booking.car.image_url %>" alt="<%= booking.car.full_name %>" class="car-thumbnail">
                <div class="car-details">
                  <h3><%= booking.car.full_name %></h3>
                  <div class="car-price">$<%= booking.car.price_per_day %>/–¥–µ–Ω</div>
                </div>
              </div>

              <div class="booking-info">
                <div class="info-item">
                  <span class="label">–ö–ª–∏–µ–Ω—Ç:</span>
                  <span class="value"><%= booking.customer_name %></span>
                </div>
                <div class="info-item">
                  <span class="label">–î–∞—Ç—É–º–∏:</span>
                  <span class="value">
                    <%= booking.start_date.strftime("%d/%m/%Y") %> - 
                    <%= booking.end_date.strftime("%d/%m/%Y") %>
                  </span>
                </div>
                <div class="info-item">
                  <span class="label">–í–∫—É–ø–Ω–æ:</span>
                  <span class="value">$<%= booking.total_price %></span>
                </div>
                <div class="info-item">
                  <span class="label">–ö—Ä–µ–∏—Ä–∞–Ω–æ:</span>
                  <span class="value"><%= booking.created_at.strftime("%d/%m/%Y –≤–æ %H:%M") %></span>
                </div>
              </div>
            </div>

            <div class="booking-actions">
              <%= link_to "–ü–æ–≥–ª–µ–¥–Ω–∏ –¥–µ—Ç–∞–ª–∏", booking_path(booking), class: "btn btn-sm btn-primary" %>
              <% if booking.can_be_cancelled? %>
                <%= link_to "–û—Ç–∫–∞–∂–∏", cancel_booking_path(booking), 
                    method: :patch, 
                    class: "btn btn-sm btn-danger", 
                    confirm: "–î–∞–ª–∏ —Å—Ç–µ —Å–∏–≥—É—Ä–Ω–∏?" %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="empty-state">
        <div class="empty-icon">üìÖ</div>
        <h3>–ù–µ —Å–µ –ø—Ä–æ–Ω–∞—ò–¥–µ–Ω–∏ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏</h3>
        <p>–°—ê —É—à—Ç–µ –Ω–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏ –≤–æ —Å–∏—Å—Ç–µ–º–æ—Ç.</p>
        <%= link_to "–ü—Ä–µ–ª–∏—Å—Ç–∞—ò –≤–æ–∑–∏–ª–∞", cars_path, class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</section>
